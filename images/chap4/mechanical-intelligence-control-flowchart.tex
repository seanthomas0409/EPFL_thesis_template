% !TEX root = ../../sethomas_thesis_main.tex
\documentclass[border=1mm,
               class=article
               preview]{standalone}

\begin{document}

\begin{tikzpicture}[node distance=3.5cm]
    \node (latch) [textbox, align=center, fill=black] {\color{white}Latch Control\\$F(x)$};
    \node (power) [textbox, right of=latch, align=center, xshift=1.5cm, fill=black] {\color{white}Power Supply\\$I$};
    \node (sma) [textbox, below of=power, yshift=1.0cm] {SMA};
    \node (rtemp) [textbox, right of=power, align=center, xshift=1.5cm, fill=black] {\color{white}Room Temp.\\$T_R, H$};
    \node (snap) [textbox, below of=sma, yshift=1.0cm] {Snap-Through\\$F_\mathrm{SMA}(\varepsilon) = F_\textrm{snap}$};
    \node (tctemp) [textbox, below of=rtemp, draw=none, yshift=1.0cm] {};
    \node (latchtemp) [textbox, below of=latch, draw=none, yshift=1.0cm] {};
    \node (stroke) [textbox, right of=snap, xshift=1.5cm, fill=black] {\color{white}Total Stroke $\varepsilon$};

    \draw (snap) --  node[anchor=south, align=left] {$< F_\mathrm{SMA}^\mathrm{max}$} (stroke);

    \draw [arrow] (power) -- node[anchor=west, align=left] {$t_h$} (sma);
    \draw [arrow] (rtemp) |- node[anchor=west, align=left] {} (sma);
    \draw (rtemp) -- node[anchor=west, align=left] {$t_c$} (tctemp);

    \draw (latch) -- node[anchor=west, align=left] {$F_\mathrm{snap}$\\$=F(x_\mathrm{snap})$} (latchtemp);
    \draw [arrow] (latch) |- node[anchor=west, align=left] {} (snap);

    \draw [arrow] (sma) -- node[anchor=west, align=left] {$F_\mathrm{SMA}^\mathrm{max}$} (snap);
    \draw [arrow] (sma) -- node[anchor=east, align=right] {$F_\mathrm{SMA}(\varepsilon)$} (snap);

    \coordinate (South stroke) at ($(stroke.south)-(0,0.5cm)$);
    \coordinate (Left stroke) at ($(stroke.south)-(12.0cm,0.5cm)$);
    \draw [arrow] (stroke.south) -- (South stroke) |- (Left stroke) |-  (latch.west);


    % \node (tau) [textbox, align=center] {Time Response\\$\tau$};
    % \node (sma) [textbox, below of=tau] {SMA};
    % \node (asma) [textbox, right of=tau, align=center, xshift=1.5cm] {Antagonistic\\SMA};
    % \node (op) [textbox, right of=sma, xshift=1.5cm, align=center] {Operating\\Points};
    % \node (bcm) [textbox, right of=op, xshift=1.5cm, align=center] {Biasing\\Compliant Mechanism};
    % \node (erb) [textbox, above of=bcm, align=center] {Flexure Hinge\\$e,r,b$};
    % \node (dx) [textbox, below of=op, align=center] {Stroke\\$\Delta x$};
    %
    % \draw [arrow] (tau) -- node[anchor=west, align=left] {Wire\\Diameter} (sma);
    % \draw [arrow] (tau) -- node[anchor=north, align=center] {Wire\\Diameter} (asma);
    % \draw [arrow] (asma) -- node[anchor=east, align=center] {$F(x)+F_\mathrm{C}(\theta(x))$} node[anchor=west] {$x_\mathrm{off}$} (op);
    % \draw [arrow] (sma) -- node[anchor=north] {$F_\mathrm{max}$} node[anchor=south] {$F(x)$} (op);
    % \draw [arrow] (erb) -- node[anchor=east] {$K_\theta$} (bcm);
    %
    % \draw [arrow] let \p1=(bcm.west), \p2=(asma.east) in (bcm.west) -- (\x1-0.5*\x1+0.5*\x2,\y1) -- node[anchor=west] {$F_\mathrm{C}(\theta(x))$} (\x2+0.5*\x1-0.5*\x2,\y2) -- (asma.east);
    % \draw [arrow] (op) -- node[anchor=east] {$F < F_\mathrm{max}$} (dx);
    %
    % \coordinate (Right erb) at ($(erb.east)+(0.5cm,0)$);
    % \coordinate (Right dx) at ($(dx.east)+(5.5cm,0)$);
    % \draw [arrow] (dx.east) -- (Right dx) |- (Right erb) -- (erb.east);
\end{tikzpicture}
%   };% Comment to remove border
% \draw [rounded corners=.2em] (table.north west) rectangle (table.south east);% Comment to remove border
% \end{tikzpicture}% Comment to remove border
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\end{document}
